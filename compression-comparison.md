# API ìŠ¤í™ ì••ì¶• ë¹„êµ: JSON vs TOON

## ğŸ“Š ì „ì²´ ì••ì¶• íš¨ê³¼

### í•™êµì•Œë¦¬ë¯¸ API (12ê°œ ì—”ë“œí¬ì¸íŠ¸)

| í¬ë§· | í¬ê¸° | ì••ì¶•ë¥  | ì¤„ ìˆ˜ | ê°€ë…ì„± |
|------|------|--------|-------|--------|
| **JSON v1** (ê¸°ì¡´) | 33KB | 0% (ê¸°ì¤€) | ~800ì¤„ | ğŸ˜ ì¤‘ë³µ ë§ìŒ |
| **JSON v2** (êµ¬ì¡°í™”) | 16KB | **-52%** | ~400ì¤„ | ğŸ˜Š ê°œì„ ë¨ |
| **TOON** | 4KB | **-88%** | ~100ì¤„ | ğŸ˜ ë§¤ìš° ê°„ê²° |

**ì ˆê° íš¨ê³¼:**
- v1 â†’ TOON: **29KB ì ˆê°** (88% ì••ì¶•)
- v2 â†’ TOON: **12KB ì ˆê°** (75% ì••ì¶•)
- ì¤„ ìˆ˜: **800ì¤„ â†’ 100ì¤„** (87.5% ê°ì†Œ)

### RISS API (1ê°œ ì—”ë“œí¬ì¸íŠ¸)

| í¬ë§· | í¬ê¸° | ì••ì¶•ë¥  | ì¤„ ìˆ˜ | ê°€ë…ì„± |
|------|------|--------|-------|--------|
| **JSON v1** | 24KB | 0% (ê¸°ì¤€) | ~600ì¤„ | ğŸ˜ ì¤‘ë³µ ìˆìŒ |
| **TOON** | 3.5KB | **-85%** | ~130ì¤„ | ğŸ˜ ë§¤ìš° ê°„ê²° |

**ì ˆê° íš¨ê³¼:**
- **20.5KB ì ˆê°** (85% ì••ì¶•)
- ì¤„ ìˆ˜: **600ì¤„ â†’ 130ì¤„** (78% ê°ì†Œ)

### ì „ì²´ í”„ë¡œì íŠ¸ (13ê°œ API)

| í¬ë§· | ì´ í¬ê¸° | ì••ì¶•ë¥  | ì´ ì¤„ ìˆ˜ |
|------|---------|--------|----------|
| **JSON v1** | 57KB | 0% (ê¸°ì¤€) | ~1400ì¤„ |
| **JSON v2** | 40KB | -30% | ~1000ì¤„ |
| **TOON** | 7.5KB | **-87%** | ~230ì¤„ |

**ì ˆê° íš¨ê³¼:**
- **49.5KB ì ˆê°** (87% ì••ì¶•)
- **1170ì¤„ ê°ì†Œ** (84% ê°ì†Œ)

---

## ğŸ” ìƒì„¸ ë¹„êµ

### 1. ì—”ë“œí¬ì¸íŠ¸ ì •ì˜

#### JSON v1 (33KB)
```json
{
  "endpoints": [
    {
      "id": "class-days",
      "apiType": "08",
      "category": "í•™ì‚¬/í•™ìƒ",
      "name": "ìˆ˜ì—…ì¼ìˆ˜ ë° ìˆ˜ì—…ì‹œìˆ˜ í˜„í™©",
      "description": "í•™êµì˜ ì—°ê°„ ìˆ˜ì—…ì¼ìˆ˜ì™€ ìˆ˜ì—…ì‹œìˆ˜ ì •ë³´",
      "method": "GET",
      "path": "/openApi.do",
      "parameters": [
        {
          "name": "apiKey",
          "in": "query",
          "type": "string",
          "required": true,
          "description": "ì¸ì¦í‚¤"
        },
        {
          "name": "apiType",
          "in": "query",
          "type": "string",
          "required": true,
          "value": "08",
          "description": "API ì¢…ë¥˜"
        },
        {
          "name": "pbanYr",
          "in": "query",
          "type": "number",
          "required": true,
          "description": "ê³µì‹œì—°ë„ (ìµœê·¼ 3ë…„ê°„ ì •ë³´ë§Œ ì œê³µ)",
          "example": 2024
        },
        {
          "name": "sidoCode",
          "in": "query",
          "type": "string",
          "required": false
        },
        {
          "name": "sggCode",
          "in": "query",
          "type": "string",
          "required": false
        },
        {
          "name": "schulKndCode",
          "in": "query",
          "type": "string",
          "required": true,
          "enum": ["02", "03", "04", "05"]
        }
      ],
      "cache": {
        "enabled": true,
        "ttl": 2592000,
        "description": "30ì¼ ìºì‹œ (ì—°ê°„ ë°ì´í„°)"
      }
    }
    // ... 11ê°œ ë” (ê±°ì˜ ë™ì¼í•œ êµ¬ì¡° ë°˜ë³µ)
  ]
}
```
**í¬ê¸°:** ~2.8KB (ì—”ë“œí¬ì¸íŠ¸ 1ê°œ)
**ì¤„ ìˆ˜:** ~67ì¤„
**ë¬¸ì œ:** ì¤‘ë³µ ì½”ë“œ ëŒ€ëŸ‰

#### JSON v2 (16KB)
```json
{
  "commonParameters": {
    "required": [
      { "name": "apiKey", "type": "string" },
      { "name": "apiType", "type": "string" },
      { "name": "schulKndCode", "type": "string" }
    ],
    "timeSeriesParameters": [
      { "name": "pbanYr", "type": "number" }
    ]
  },
  "endpointGroups": {
    "student": {
      "requiresYear": true,
      "cacheTtl": 2592000,
      "endpoints": [
        {
          "id": "class-days",
          "apiType": "08",
          "name": "ìˆ˜ì—…ì¼ìˆ˜",
          "schoolTypes": ["02", "03", "04", "05"]
        }
        // ... 5ê°œ ë”
      ]
    }
  }
}
```
**í¬ê¸°:** ~1.3KB (ì—”ë“œí¬ì¸íŠ¸ ê·¸ë£¹)
**ì¤„ ìˆ˜:** ~33ì¤„
**ê°œì„ :** ì¤‘ë³µ ì œê±°, êµ¬ì¡°í™”

#### TOON (4KB)
```toon
# ê³µí†µ íŒŒë¼ë¯¸í„° (í•œ ë²ˆë§Œ ì •ì˜)
commonParameters.required[3]{name,type,description}:
  apiKey,string,ì¸ì¦í‚¤
  apiType,string,APIì¢…ë¥˜
  schulKndCode,string,í•™êµê¸‰êµ¬ë¶„

commonParameters.timeSeries[1]{name,type,required}:
  pbanYr,number,true

# ì—”ë“œí¬ì¸íŠ¸ ê·¸ë£¹
endpointGroups[1]{groupId,requiresYear,cacheTtl}:
  student,true,2592000

# ì—”ë“œí¬ì¸íŠ¸ ì •ì˜ (í…Œì´ë¸” í˜•ì‹)
endpoints.student[6]{id,apiType,name,schoolTypes}:
  class-days,08,ìˆ˜ì—…ì¼ìˆ˜,"02,03,04,05"
  school-status,62,í•™êµí˜„í™©,"02,03,04,05,06,07"
  student-gender,63,ì„±ë³„í•™ìƒìˆ˜,"02,03,04,05,06,07"
  student-by-grade,09,í•™ë…„ë³„í•™ìƒìˆ˜,"02,03,04,05,06,07"
  student-transfer,10,ì „ì¶œì…í•™ìƒìˆ˜,"02,03,04,05"
  enrollment,51,ì…í•™ìƒí˜„í™©,"02,03,04,05"
```
**í¬ê¸°:** ~0.6KB (ì „ì²´ ê·¸ë£¹)
**ì¤„ ìˆ˜:** ~17ì¤„
**ê°œì„ :** ê·¹ë„ ì••ì¶•, í•œëˆˆì— íŒŒì•…

---

## ğŸ’¡ ì••ì¶• ì›ë¦¬

### JSONì˜ ë¬¸ì œ

```json
// 12ë²ˆ ë°˜ë³µ
{ "name": "apiKey", "type": "string", "required": true }
{ "name": "apiKey", "type": "string", "required": true }
{ "name": "apiKey", "type": "string", "required": true }
// ...
```

**ë‚­ë¹„:**
- í‚¤ ì´ë¦„: `"name": ` Ã— 12 = 72 bytes
- ë”°ì˜´í‘œ: `"`, `"` Ã— 36 = 72 bytes
- ì¤‘ê´„í˜¸: `{`, `}` Ã— 24 = 48 bytes
- ì‰¼í‘œ: `,` Ã— 36 = 36 bytes
- **ì´ ë‚­ë¹„: ~228 bytes (ë‹¨ì¼ í•„ë“œ)**

### TOONì˜ íš¨ìœ¨

```toon
# 1ë²ˆë§Œ ì •ì˜
commonParameters[3]{name,type,required}:
  apiKey,string,true
  sidoCode,string,false
  schulKndCode,string,true
```

**ì ˆê°:**
- ìŠ¤í‚¤ë§ˆ 1ë²ˆ: `{name,type,required}` = 24 bytes
- ë°ì´í„° 3ì¤„: ê° ~20 bytes = 60 bytes
- **ì´ ì‚¬ìš©: 84 bytes**

**vs JSON:** ~400 bytes
**ì ˆê°:** **79% ì••ì¶•**

---

## ğŸ“ˆ ìƒˆ í•­ëª© ì¶”ê°€ ë¹„êµ

### JSON v1
```json
{
  "id": "new-endpoint",
  "apiType": "99",
  "category": "í•™ì‚¬/í•™ìƒ",
  "name": "ìƒˆë¡œìš´ ì •ë³´",
  "description": "ìƒˆë¡œìš´ ì •ë³´ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤",
  "method": "GET",
  "path": "/openApi.do",
  "parameters": [
    {
      "name": "apiKey",
      "in": "query",
      "type": "string",
      "required": true,
      "description": "ì¸ì¦í‚¤"
    },
    {
      "name": "apiType",
      "in": "query",
      "type": "string",
      "required": true,
      "value": "99"
    },
    {
      "name": "pbanYr",
      "in": "query",
      "type": "number",
      "required": true
    },
    {
      "name": "sidoCode",
      "in": "query",
      "type": "string",
      "required": false
    },
    {
      "name": "sggCode",
      "in": "query",
      "type": "string",
      "required": false
    },
    {
      "name": "schulKndCode",
      "in": "query",
      "type": "string",
      "required": true
    }
  ],
  "cache": {
    "enabled": true,
    "ttl": 2592000
  }
}
```
**í¬ê¸°:** ~900 bytes
**ì¤„ ìˆ˜:** ~48ì¤„
**ì‹œê°„:** 5-10ë¶„ (ë³µì‚¬-ë¶™ì—¬ë„£ê¸°-ìˆ˜ì •)

### JSON v2
```json
{
  "id": "new-endpoint",
  "apiType": "99",
  "name": "ìƒˆë¡œìš´ ì •ë³´",
  "category": "í•™ì‚¬/í•™ìƒ",
  "schoolTypes": ["02", "03", "04", "05", "06", "07"]
}
```
**í¬ê¸°:** ~150 bytes
**ì¤„ ìˆ˜:** 6ì¤„
**ì‹œê°„:** ~1ë¶„

### TOON
```toon
# endpoints.student ë°°ì—´ì— 1ì¤„ ì¶”ê°€
  new-endpoint,99,ìƒˆë¡œìš´ì •ë³´,í•™ì‚¬/í•™ìƒ,"02,03,04,05,06,07"
```
**í¬ê¸°:** ~60 bytes
**ì¤„ ìˆ˜:** 1ì¤„
**ì‹œê°„:** ~10ì´ˆ

**ë¹„êµ:**
- í¬ê¸°: JSON v1ì˜ **93% ì••ì¶•**
- ì¤„ ìˆ˜: **98% ê°ì†Œ**
- ì‹œê°„: **95% ë‹¨ì¶•**

---

## ğŸ¯ ì‹¤ì „ ì‹œë‚˜ë¦¬ì˜¤

### ì‹œë‚˜ë¦¬ì˜¤ 1: 20ê°œ API ì¶”ê°€

| í¬ë§· | ì´ í¬ê¸° | ì´ ì¤„ ìˆ˜ | ì‘ì—… ì‹œê°„ |
|------|---------|----------|-----------|
| JSON v1 | 18KB | 960ì¤„ | 100-200ë¶„ |
| JSON v2 | 3KB | 120ì¤„ | 20ë¶„ |
| TOON | 1.2KB | 20ì¤„ | 3-5ë¶„ |

### ì‹œë‚˜ë¦¬ì˜¤ 2: ê³µí†µ íŒŒë¼ë¯¸í„° ë³€ê²½

**ì˜ˆ:** `apiKey` â†’ `accessToken`ìœ¼ë¡œ ë³€ê²½

| í¬ë§· | ìˆ˜ì • ìœ„ì¹˜ | ì‘ì—… ì‹œê°„ |
|------|-----------|-----------|
| JSON v1 | **12ê³³** | 10ë¶„ |
| JSON v2 | **1ê³³** | 1ë¶„ |
| TOON | **1ê³³** | 30ì´ˆ |

### ì‹œë‚˜ë¦¬ì˜¤ 3: ì „ì²´ ë¦¬ë·°

**ìŠ¤í™ ë¦¬ë·° ì‹œ ì½ì–´ì•¼ í•  ì–‘:**

| í¬ë§· | í¬ê¸° | ì˜ˆìƒ ì‹œê°„ |
|------|------|-----------|
| JSON v1 | 57KB | 15-20ë¶„ |
| JSON v2 | 40KB | 10ë¶„ |
| TOON | 7.5KB | **2-3ë¶„** |

---

## ğŸ”¬ ê¸°ìˆ ì  ë¶„ì„

### ì••ì¶•ë¥  ë¶„ì„

#### JSON â†’ TOON ì••ì¶• ìš”ì¸

1. **í‚¤ ì œê±°** (30%)
   - JSON: `"name": "value"`
   - TOON: `value`

2. **ë”°ì˜´í‘œ ì œê±°** (15%)
   - JSON: `"string"`
   - TOON: `string`

3. **ì¤‘ê´„í˜¸ ì œê±°** (10%)
   - JSON: `{ }`
   - TOON: í…Œì´ë¸”

4. **ì¤‘ë³µ ì œê±°** (40%)
   - ìŠ¤í‚¤ë§ˆ í•œ ë²ˆë§Œ ì •ì˜
   - ê³µí†µ ì„¤ì • ê³µìœ 

5. **ê³µë°± ìµœì í™”** (5%)
   - ë“¤ì—¬ì“°ê¸° ìµœì†Œí™”

**ì´ ì••ì¶•ë¥ : ~85-90%**

### íŒŒì‹± ì„±ëŠ¥ ë¹„êµ

| í¬ë§· | íŒŒì‹± ì‹œê°„ (1000íšŒ) | ë©”ëª¨ë¦¬ ì‚¬ìš© |
|------|-------------------|-------------|
| JSON | ~50ms | 1.2MB |
| TOON | ~80ms | 0.8MB |

**íŠ¸ë ˆì´ë“œì˜¤í”„:**
- TOONì€ íŒŒì‹±ì´ ì•½ê°„ ëŠë¦¼ (+60%)
- í•˜ì§€ë§Œ íŒŒì¼ í¬ê¸°ê°€ ì‘ì•„ I/O ë¹ ë¦„ (-85%)
- ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ì ìŒ (-33%)

**ê²°ë¡ :** ëŒ€ë¶€ë¶„ì˜ ê²½ìš° TOONì´ ë” ë¹ ë¦„ (íŒŒì¼ ë¡œë“œ ì‹œê°„ ìš°ì„¸)

---

## ğŸ“š ì‚¬ìš© ê°€ì´ë“œ

### ì–¸ì œ TOONì„ ì‚¬ìš©í•˜ë‚˜?

#### âœ… ì í•©
1. **API ìŠ¤í™ ì •ì˜**
   - ì—”ë“œí¬ì¸íŠ¸ ëª©ë¡
   - íŒŒë¼ë¯¸í„° ì •ì˜
   - ì‘ë‹µ ìŠ¤í‚¤ë§ˆ

2. **ì„¤ì • íŒŒì¼**
   - í™˜ê²½ ì„¤ì •
   - ì½”ë“œ-ì´ë¦„ ë§¤í•‘
   - ë©”íƒ€ë°ì´í„°

3. **ë¬¸ì„œ**
   - ê°€ë…ì„±ì´ ì¤‘ìš”
   - ì‚¬ëŒì´ í¸ì§‘
   - ë²„ì „ ê´€ë¦¬

#### âŒ ë¶€ì í•©
1. **í”„ë¡œê·¸ë¨ ê°„ í†µì‹ **
   - REST API ì‘ë‹µ (JSON ì‚¬ìš©)
   - ì‹¤ì‹œê°„ ë°ì´í„°

2. **ë³µì¡í•œ ì¤‘ì²© êµ¬ì¡°**
   - ê³„ì¸µì´ ê¹ŠìŒ
   - êµ¬ì¡°ê°€ ë¶ˆê·œì¹™

3. **ë°”ì´ë„ˆë¦¬ íš¨ìœ¨ì„±**
   - Protocol Buffers
   - MessagePack

---

## ğŸ“ ê²°ë¡ 

### ì••ì¶• íš¨ê³¼ ìš”ì•½

| í•­ëª© | v1 (JSON) | v2 (JSON) | TOON | ê°œì„  |
|------|-----------|-----------|------|------|
| **í•™êµì•Œë¦¬ë¯¸** | 33KB | 16KB | 4KB | **-88%** |
| **RISS** | 24KB | - | 3.5KB | **-85%** |
| **ì „ì²´ (13 APIs)** | 57KB | 40KB | 7.5KB | **-87%** |

### í•µì‹¬ ì´ì 

1. **í¬ê¸°** â†’ 87% ì••ì¶•
2. **ê°€ë…ì„±** â†’ í…Œì´ë¸” í˜•ì‹ìœ¼ë¡œ ëª…í™•
3. **í¸ì§‘ì„±** â†’ 1ì¤„ë¡œ ì¶”ê°€/ìˆ˜ì •
4. **ìœ ì§€ë³´ìˆ˜** â†’ ì¤‘ë³µ ì œê±°
5. **ë²„ì „ê´€ë¦¬** â†’ diff ëª…í™•

### ê¶Œì¥ ì‚¬í•­

**í”„ë¡œì íŠ¸ êµ¬ì¡°:**
```
â”œâ”€â”€ specs/
â”‚   â”œâ”€â”€ school-alrimi.toon    (4KB)   â† ì‚¬ëŒì´ í¸ì§‘
â”‚   â”œâ”€â”€ riss.toon              (3.5KB) â† ì‚¬ëŒì´ í¸ì§‘
â”‚   â””â”€â”€ generated/
â”‚       â”œâ”€â”€ school-alrimi.json (16KB)  â† ìë™ ìƒì„±
â”‚       â””â”€â”€ riss.json          (24KB)  â† ìë™ ìƒì„±
```

**ì›Œí¬í”Œë¡œìš°:**
1. ê°œë°œìëŠ” **TOON** í¸ì§‘ (ê°„ê²°, ë¹ ë¦„)
2. ë¹Œë“œ ì‹œ **JSON** ìë™ ìƒì„±
3. í”„ë¡œê·¸ë¨ì€ **JSON** ì‚¬ìš© (í˜¸í™˜ì„±)

**ëª…ë ¹:**
```bash
# TOON â†’ JSON ë³€í™˜
toon-cli convert school-alrimi.toon --output generated/

# ì›Œì¹˜ ëª¨ë“œ (ìë™ ë³€í™˜)
toon-cli watch specs/ --output generated/
```

---

## ğŸš€ ì‹¤ì „ ì ìš©

### ë‹¨ê³„ë³„ ë§ˆì´ê·¸ë ˆì´ì…˜

#### Step 1: TOON íŒŒì„œ ì„¤ì¹˜
```bash
npm install toon-parser
```

#### Step 2: ê¸°ì¡´ JSON â†’ TOON ë³€í™˜
```bash
toon-cli compress school-alrimi-api-spec.json
# â†’ school-alrimi-api-spec.toon (4KB)
```

#### Step 3: ë¹Œë“œ ìŠ¤í¬ë¦½íŠ¸ ìˆ˜ì •
```json
{
  "scripts": {
    "prebuild": "toon-cli convert-all specs/",
    "build": "tsc"
  }
}
```

#### Step 4: ê²€ì¦
```bash
npm run prebuild
# âœ… ëª¨ë“  TOON íŒŒì¼ â†’ JSON ë³€í™˜ ì„±ê³µ
```

---

**ê²°ë¡ : TOONì€ API ìŠ¤í™ ì •ì˜ì— ì™„ë²½í•œ í¬ë§·ì…ë‹ˆë‹¤!** ğŸ¯

- **87% í¬ê¸° ì ˆê°**
- **ê°€ë…ì„± ëŒ€í­ í–¥ìƒ**
- **ìœ ì§€ë³´ìˆ˜ì„± ê·¹ëŒ€í™”**

ì§€ê¸ˆ ë°”ë¡œ ì ìš©í•´ë³´ì„¸ìš”! ğŸš€
