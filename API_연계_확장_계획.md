# 학교알리미 API 연계 확장 계획서

## 📋 목차
1. [프로젝트 개요](#프로젝트-개요)
2. [API 구조 분석](#api-구조-분석)
3. [단계별 확장 계획](#단계별-확장-계획)
4. [기술 스택](#기술-스택)
5. [평가 및 권장사항](#평가-및-권장사항)

---

## 프로젝트 개요

### 목적
학교알리미 Open API를 활용하여 교육 데이터를 체계적으로 수집, 가공, 분석할 수 있는 MCP (Model Context Protocol) 기반 통합 시스템 구축

### 데이터 소스
- **API 제공**: 학교알리미 (www.schoolinfo.go.kr)
- **데이터 포맷**: JSON
- **제공 방식**: REST API
- **요청 제한**: 없음
- **라이선스**: 출처표시 (자유이용 가능)

---

## API 구조 분석

### Base Endpoint
```
http://www.schoolinfo.go.kr/openApi.do
```

### 공통 파라미터

| 파라미터 | 타입 | 필수여부 | 설명 | 값 예시 |
|---------|------|---------|------|--------|
| apiKey | STRING | 필수 | 인증키 | - |
| apiType | STRING | 필수 | API 종류 | 0, 08, 04, 62, 63... |
| sidoCode | STRING | 선택 | 시도코드 | 11(서울), 26(부산)... |
| sggCode | STRING | 선택 | 시군구코드 | 11110(종로구)... |
| schulKndCode | STRING | 필수 | 학교급구분 | 02:초등, 03:중등, 04:고등 |
| pbanYr | NUMBER | 일부필수 | 공시연도 | 2024 (최근3년) |

### API 서비스 카테고리

#### 1️⃣ 기본정보 계층 (Foundation)
| API | apiType | 공시연도 | 학교급 | 우선순위 |
|-----|---------|---------|--------|---------|
| 학교기본정보 | 0 | 불필요 | 전체 | ⭐⭐⭐ 최우선 |

#### 2️⃣ 학사/학생 정보 계층 (Academic & Student)
| API | apiType | 공시연도 | 학교급 | 우선순위 |
|-----|---------|---------|--------|---------|
| 학교 현황 | 62 | 필수 | 전체 | ⭐⭐⭐ |
| 성별 학생수 | 63 | 필수 | 전체 | ⭐⭐⭐ |
| 학년별·학급별 학생수 | 09 | 필수 | 전체 | ⭐⭐ |
| 수업일수 및 수업시수 | 08 | 필수 | 초중고특 | ⭐⭐ |
| 입학생 현황 | 51 | 필수 | 초중고특 | ⭐⭐ |
| 전·출입 및 학업중단 학생 수 | 10 | 필수 | 초중고특 | ⭐ |
| 자유학기제 운영 | 04 | 필수 | 중등만 | ⭐ |

#### 3️⃣ 교원 정보 계층 (Teacher)
| API | apiType | 공시연도 | 학교급 | 우선순위 |
|-----|---------|---------|--------|---------|
| 직위별 교원 현황 | 22 | 필수 | 전체 | ⭐⭐ |
| 자격종별 교원 현황 | 64 | 필수 | 전체(그외제외) | ⭐ |
| 표시과목별 교원 현황 | 24 | 필수 | 초중고 | ⭐ |

#### 4️⃣ 학교생활 계층 (School Life)
| API | apiType | 공시연도 | 학교급 | 우선순위 |
|-----|---------|---------|--------|---------|
| 학교폭력 예방교육 실적 | 94 | 필수 | 전체(그외제외) | ⭐ |

### 출력값 예시 (학교기본정보 - apiType: 0)

**주요 필드:**
- `ATPT_OFCDC_ORG_NM`: 시도교육청
- `SCHUL_CODE`: 정보공시 학교코드 (학교 고유ID)
- `SCHUL_NM`: 학교명
- `SCHUL_KND_SC_CODE`: 학교급코드
- `FOND_SC_CODE`: 설립구분
- `ADRES_BRKDN`: 주소
- `LTTUD`, `LGTUD`: 위도, 경도
- `USER_TELNO`: 전화번호
- `HMPG_ADRES`: 홈페이지

---

## 단계별 확장 계획

### 🎯 Phase 1: 기초 인프라 구축 (Week 1-2)

#### 목표
- 기본 API 연동 환경 구축
- 학교 검색 기능 구현

#### 구현 내용
1. **프로젝트 초기화**
   ```bash
   - TypeScript + Node.js 환경 설정
   - MCP Server 구조 설계
   - 환경변수 관리 (.env)
   ```

2. **시도/시군구 코드 관리**
   - 시도코드.xlsx → JSON/SQLite 변환
   - 지역 코드 조회 유틸리티 함수 작성

3. **API Type 0 (학교기본정보) 구현**
   - API 클라이언트 기본 구조 작성
   - 요청/응답 타입 정의
   - 에러 핸들링
   - 학교 검색 기능:
     - 지역별 검색
     - 학교급별 검색
     - 학교명 검색

4. **MCP Tools 구현**
   ```typescript
   - search_schools: 학교 검색
   - get_school_detail: 학교 상세정보
   ```

#### 성공 기준
- [ ] 특정 지역의 모든 학교 검색 가능
- [ ] 학교명으로 학교 정보 조회 가능
- [ ] API 키 관리 및 보안 구현
- [ ] 기본 로깅 시스템 구축

#### 예상 소요시간: 8-12시간

---

### 🎯 Phase 2: 학생 정보 통합 (Week 3-4)

#### 목표
- 학교별 학생 현황 데이터 통합

#### 구현 내용
1. **API Type 62, 63, 09 통합**
   - 학교 현황 (전체 개요)
   - 성별 학생수
   - 학년별·학급별 학생수

2. **데이터 정규화**
   - 학교코드(SCHUL_CODE) 기반 데이터 연결
   - 공시연도별 데이터 관리
   - 캐싱 전략 수립 (최근 3년 데이터)

3. **MCP Tools 확장**
   ```typescript
   - get_student_stats: 학생 통계 조회
   - get_class_distribution: 학급 분포 조회
   - compare_schools: 학교 비교 분석
   ```

4. **데이터 시각화 준비**
   - JSON 응답 구조화
   - 통계 데이터 집계 함수

#### 성공 기준
- [ ] 학교별 학생 수 조회 가능
- [ ] 학년/성별 분포 데이터 제공
- [ ] 최근 3년 추세 분석 가능
- [ ] 여러 학교 비교 기능

#### 예상 소요시간: 10-15시간

---

### 🎯 Phase 3: 교원 정보 통합 (Week 5)

#### 목표
- 교원 현황 데이터 통합 및 분석

#### 구현 내용
1. **API Type 22, 64, 24 통합**
   - 직위별 교원 현황
   - 자격종별 교원 현황
   - 표시과목별 교원 현황

2. **MCP Tools 확장**
   ```typescript
   - get_teacher_stats: 교원 통계 조회
   - get_teacher_by_subject: 과목별 교원 조회
   - analyze_teacher_distribution: 교원 분포 분석
   ```

3. **학생-교원 비율 계산**
   - Phase 2 데이터와 결합
   - 학급당 교원 수 계산
   - 학생-교원 비율 분석

#### 성공 기준
- [ ] 학교별 교원 현황 조회
- [ ] 과목별 교원 분포 확인
- [ ] 학생-교원 비율 계산
- [ ] 지역별 교원 비교

#### 예상 소요시간: 8-10시간

---

### 🎯 Phase 4: 학사 운영 데이터 통합 (Week 6)

#### 목표
- 학사 운영 관련 세부 데이터 추가

#### 구현 내용
1. **API Type 08, 51, 10, 04 통합**
   - 수업일수 및 수업시수
   - 입학생 현황
   - 전·출입 및 학업중단 학생 수
   - 자유학기제 운영 (중등)

2. **MCP Tools 확장**
   ```typescript
   - get_academic_schedule: 학사일정 정보
   - get_enrollment_stats: 입학 통계
   - get_dropout_stats: 학업중단 통계
   - get_free_semester: 자유학기제 정보 (중등)
   ```

3. **종합 분석 기능**
   - 학교 운영 건전성 지표 계산
   - 학업 지속률 분석

#### 성공 기준
- [ ] 학교별 학사 일정 조회
- [ ] 입학/전출입 추세 분석
- [ ] 학업중단율 계산
- [ ] 중학교 자유학기제 정보 제공

#### 예상 소요시간: 10-12시간

---

### 🎯 Phase 5: 학교생활 및 안전 데이터 (Week 7)

#### 목표
- 학교 안전 및 생활 관련 데이터 통합

#### 구현 내용
1. **API Type 94 통합**
   - 학교폭력 예방교육 실적

2. **MCP Tools 확장**
   ```typescript
   - get_safety_education: 안전교육 실적
   - analyze_safety_trends: 안전교육 추세 분석
   ```

#### 성공 기준
- [ ] 학교별 안전교육 실적 조회
- [ ] 지역별 안전교육 비교

#### 예상 소요시간: 4-6시간

---

### 🎯 Phase 6: 통합 대시보드 및 고급 분석 (Week 8-9)

#### 목표
- 모든 데이터를 통합한 종합 분석 기능

#### 구현 내용
1. **통합 MCP Tools**
   ```typescript
   - get_school_profile: 학교 종합 프로필
   - compare_multiple_schools: 다중 학교 비교
   - get_regional_analytics: 지역 교육 통계
   - search_schools_by_criteria: 조건별 학교 검색
   ```

2. **고급 분석 기능**
   - 학교 평가 점수 계산 (종합 지표)
   - 지역별 교육 수준 비교
   - 연도별 추세 분석
   - 이상치 탐지 (평균 대비 특이 사항)

3. **데이터 저장소 구축**
   - SQLite/PostgreSQL 데이터베이스
   - 캐시 레이어 (Redis 선택사항)
   - 배치 업데이트 스케줄러

4. **API 레이트 리미팅 및 최적화**
   - 요청 큐 관리
   - 배치 요청 처리
   - 캐시 전략 고도화

#### 성공 기준
- [ ] 학교 종합 프로필 원클릭 조회
- [ ] 복잡한 조건 검색 (예: "서울 강남구 고등학교 중 학생수 500명 이상")
- [ ] 지역별 교육 통계 대시보드
- [ ] 데이터 자동 업데이트 시스템

#### 예상 소요시간: 15-20시간

---

### 🎯 Phase 7: 확장 및 최적화 (Week 10+)

#### 목표
- 추가 API 연계 및 시스템 안정화

#### 구현 내용
1. **타 교육 API 연계 준비**
   - 나이스 교육정보 Open API
   - 학교 급식 정보 API
   - 대학정보공시 API

2. **성능 최적화**
   - 쿼리 최적화
   - 응답 시간 개선
   - 메모리 사용 최적화

3. **모니터링 및 로깅**
   - API 사용량 추적
   - 에러 모니터링
   - 성능 메트릭

4. **문서화**
   - API 사용 가이드
   - MCP Tools 레퍼런스
   - 예제 코드 작성

#### 성공 기준
- [ ] 추가 API 1개 이상 연동
- [ ] 평균 응답시간 < 500ms
- [ ] 에러율 < 1%
- [ ] 완전한 문서화

#### 예상 소요시간: 지속적 개선

---

## 기술 스택

### 백엔드
```typescript
- Runtime: Node.js 20+
- Language: TypeScript 5+
- Framework: Express.js (API 서버, 선택사항)
- MCP SDK: @modelcontextprotocol/sdk
```

### 데이터베이스
```
- Primary: SQLite (초기) → PostgreSQL (확장)
- Cache: Redis (선택사항)
- ORM: Prisma 또는 TypeORM
```

### 유틸리티
```typescript
- HTTP Client: axios / node-fetch
- Validation: zod
- Logging: winston / pino
- Testing: Jest / Vitest
```

### 프로젝트 구조
```
251104 MCP_edu/
├── src/
│   ├── mcp/
│   │   ├── server.ts          # MCP 서버 메인
│   │   └── tools/              # MCP Tools 정의
│   │       ├── school-search.ts
│   │       ├── student-stats.ts
│   │       ├── teacher-stats.ts
│   │       └── analytics.ts
│   ├── api/
│   │   ├── client.ts           # API 클라이언트
│   │   ├── types.ts            # 타입 정의
│   │   └── endpoints/          # API 엔드포인트별 구현
│   │       ├── school-info.ts  (apiType: 0)
│   │       ├── student.ts      (apiType: 08,62,63,09,10,51)
│   │       ├── teacher.ts      (apiType: 22,64,24)
│   │       └── school-life.ts  (apiType: 04,94)
│   ├── db/
│   │   ├── schema.ts           # DB 스키마
│   │   ├── cache.ts            # 캐시 관리
│   │   └── queries.ts          # DB 쿼리
│   ├── utils/
│   │   ├── codes.ts            # 시도/시군구 코드 유틸
│   │   ├── validators.ts       # 입력 검증
│   │   └── logger.ts           # 로깅
│   └── config/
│       └── constants.ts        # 상수 정의
├── data/
│   └── sido-codes.json         # 시도코드 데이터
├── tests/
├── .env                        # 환경변수
├── package.json
└── tsconfig.json
```

---

## 평가 및 권장사항

### ✅ 강점

1. **데이터 품질**
   - 공공기관 제공으로 신뢰도 높음
   - 표준화된 데이터 포맷
   - 최근 3년 데이터 보장

2. **API 안정성**
   - 요청 제한 없음
   - REST API로 구현 용이
   - JSON 응답으로 파싱 간편

3. **활용도**
   - 교육 통계 분석
   - 학교 비교 서비스
   - AI 기반 학교 추천 시스템
   - 교육 정책 연구

### ⚠️ 주의사항

1. **데이터 제약**
   - 최근 3년 데이터만 제공 (apiType 0 제외)
   - 실시간 데이터 아님 (연간 단위 공시)
   - 학교급별로 제공 API 상이

2. **기술적 고려사항**
   - API 키 보안 관리 필수
   - 대량 요청 시 자체 레이트 리미팅 권장
   - 응답 시간 변동 가능성 (캐싱 필요)

3. **법적 고려사항**
   - 출처 표시 의무
   - 개인정보 포함 가능성 (전화번호 등)

### 📊 난이도 평가

| Phase | 난이도 | 핵심 과제 |
|-------|--------|----------|
| Phase 1 | ⭐⭐ | MCP 서버 구조 설계 |
| Phase 2 | ⭐⭐⭐ | 데이터 정규화 및 통합 |
| Phase 3 | ⭐⭐ | 기존 패턴 반복 |
| Phase 4 | ⭐⭐ | 조건부 처리 (학교급별) |
| Phase 5 | ⭐ | 간단한 추가 |
| Phase 6 | ⭐⭐⭐⭐ | 복잡한 쿼리 및 분석 |
| Phase 7 | ⭐⭐⭐ | 성능 최적화 |

**전체 난이도**: 중급~고급 (★★★☆☆)

### 🎯 학습 효과

1. **MCP 프로토콜 이해**
   - Tool 기반 인터페이스 설계
   - 대규모 API 통합 경험

2. **데이터 엔지니어링**
   - API 응답 정규화
   - 캐싱 전략 수립
   - 데이터베이스 설계

3. **TypeScript 고급 기법**
   - 타입 안전성 확보
   - 제네릭 활용
   - 에러 핸들링 패턴

### 💡 추천 확장 방향

1. **단기 (3개월 이내)**
   - 나이스 급식 API 연동
   - 학교 위치 기반 지도 서비스
   - 엑셀/CSV 내보내기

2. **중기 (6개월 이내)**
   - 교육청별 추가 API 연동
   - AI 기반 학교 추천 시스템
   - 학부모용 대시보드

3. **장기 (1년 이내)**
   - 대학정보공시 API 통합
   - 교육 데이터 마켓플레이스
   - 오픈소스 교육 분석 플랫폼

### 📈 예상 개발 일정

```
Week 1-2:  Phase 1 (기초 인프라)           ████████░░░░░░░░ 20%
Week 3-4:  Phase 2 (학생 정보)             ████████░░░░░░░░ 40%
Week 5:    Phase 3 (교원 정보)             ████░░░░░░░░░░░░ 50%
Week 6:    Phase 4 (학사 운영)             ████░░░░░░░░░░░░ 60%
Week 7:    Phase 5 (학교생활)             ██░░░░░░░░░░░░░░ 65%
Week 8-9:  Phase 6 (통합 분석)             ██████░░░░░░░░░░ 80%
Week 10+:  Phase 7 (확장/최적화)           ████████████████ 100%
```

**총 예상 개발 시간**: 65-85시간 (약 2-2.5개월, 파트타임 기준)

---

## 결론

학교알리미 API는 **구조화된 교육 데이터**를 제공하는 우수한 공공 API입니다.

**핵심 장점:**
✅ 12개 API로 학교 정보의 거의 모든 측면 커버
✅ 표준화된 데이터 구조로 통합 용이
✅ 요청 제한 없어 대규모 데이터 수집 가능
✅ MCP 프로젝트 학습에 최적의 난이도

**권장 접근법:**
1. Phase 1-2에 집중하여 **빠른 MVP** 구축
2. 실제 사용 사례를 기반으로 우선순위 조정
3. 점진적 확장으로 **지속 가능한 개발**

이 계획서를 기반으로 **체계적인 API 통합**과 **확장 가능한 아키텍처**를 구축할 수 있습니다.
